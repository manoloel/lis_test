Тестовое задание: Рефакторинг модуля lis.py

Описание модуля:
Модуль реализует отправку результатов коагулометрических тестов в лабораторную 
информационную систему (ЛИС) по протоколу ASTM. Устанавливает TCP-соединение 
с сервером ЛИС, формирует фреймы с заголовком, информацией о пробе и результатами 
измерений, отправляет их и обрабатывает подтверждения.

Краткое описание протокола:
ASTM (также известный как LIS2-A2 или E1394) — это стандартный протокол обмена 
данными между медицинскими анализаторами и лабораторными информационными 
системами (ЛИС).

Упрощенная структура фрейма, посылаемого в ЛИС:
   <STX><номер фрейма><тип записи>|<данные><CR><ETX><контрольная сумма><CR><LF>
   Где:
   - STX, ETX, CR, LF — управляющие символы
   - номер фрейма — цифра 0-7 (циклически)
   - тип записи — H (заголовок), O (заказ), R (результат), L (терминатор)
   - контрольная сумма — сумма байтов по модулю 256, в hex-формате

Типы записей:
   - H (Header) — информация об отправителе
   - O (Order) — информация о пробе/заказе  
   - R (Result) — результат измерения
   - L (Terminator) — завершение передачи

Задание:
- Разберитесь в модуле и определите проблемные места, распишите их.
- Опишите предлагаемые решения и аргументируйте их.
- Проведите рефакторинг, обращая внимание на: читаемость, тестируемость, обработку ошибок.

Срок: до утра среды.

Дополнительно:
Файл coag.py содержит заглушки зависимостей — их изменять не нужно.
В папке находится .docx файл с подробным описанием протокола. Обратитесь к нему,
если потребуется уточнить детали реализации.

